const [initialLocationContact, setInitialLocationContact] = useState(null);
useEffect(() => {
  // Fetch initial data
  fetchEmployer_Location_ContactDetail().then(data => {
    setInitialLocationContact(data);
    // Set state value in Formik
    formik.setFieldValue("state", data.locationDetails.state);
  });
}, []);



useEffect(() => {
  if (!formik.values.state) return;
  if (formik.values.state.id === 5) {
    fetchdivisionType(formik.values.state.id).then(res => {
      setDivisionOptions(res.result || []);
      // Now, set division value in Formik
      if (initialLocationContact) {
        const selectedDivision = res.result.find(d => d.id === initialLocationContact.locationDetails.division?.id) || null;
        formik.setFieldValue("Division", selectedDivision);
      }
    });
  } else {
    fetchotherdistrictType(formik.values.state.id).then(res => {
      setDistrictOptions(res.result || []);
      if (initialLocationContact) {
        const selectedDistrict = res.result.find(d => d.id === initialLocationContact.locationDetails.district?.id) || null;
        formik.setFieldValue("district", selectedDistrict);
      }
    });
  }
}, [formik.values.state, initialLocationContact]);


useEffect(() => {
  if (formik.values.state?.id !== 5 || !formik.values.Division) return;
  fetchdistrictType(formik.values.Division.id).then(res => {
    setDistrictOptions(res.result || []);
    if (initialLocationContact) {
      const selectedDistrict = res.result.find(d => d.id === initialLocationContact.locationDetails.district?.id) || null;
      formik.setFieldValue("district", selectedDistrict);
    }
  });
}, [formik.values.Division, initialLocationContact]);




useEffect(() => {
  if (formik.values.state?.id !== 5 || !formik.values.district) return;
  fetchBlockType(formik.values.district.id).then(res => {
    setBlockOptions(res.result || []);
    if (initialLocationContact) {
      const selectedBlock = res.result.find(b => b.id === initialLocationContact.locationDetails.block?.id) || null;
      formik.setFieldValue("Block", selectedBlock);
      formik.setFieldValue("pincode", initialLocationContact.locationDetails.pincode || "");
    }
  });
}, [formik.values.district, initialLocationContact]);
